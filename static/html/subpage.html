<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>9조 대원 소개</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
        integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700;900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="/static/css/subpage.css">
    <style>

    </style>
    <script>

        $(document).ready(function () {
            const searchParams = new URLSearchParams(location.search);
            let name = searchParams.get('name')
            let formData = new FormData();
            formData.append("name", name);
            fetch('/information', { method: "POST", body: formData, }).then((response) => response.json()).then((data) => {
                let a = data['result']
                $('.content').empty()
                let name = a['name']
                let mbti = a['mbti']
                let hobby = a['hobby']
                let merit = a['merit']
                let style = a['style']
                let blog = a['blog']
                let imageURL = "";
                if (name == '김진수') {
                    imageURL = "/static/img/KJS.png"
                } else if (name == '김성훈') {
                    imageURL = "/static/img/KSH.png"
                } else if (name == '조인재') {
                    imageURL = "/static/img/JIJ.png"
                } else if (name == '윤수민') {
                    imageURL = "/static/img/YSM.png"
                } else if (name == '안홍민') {
                    imageURL = "/static/img/AHM.png"
                }
                let temp_html = `<img class="main-imoji" src="${imageURL}">
                            <div class="controls">
                                <p>
                                <label for="name">이름: </label>
                                <input class="input_border" type="text" id="name" name="name" value="${name}"readonly />
                            </p>
                            <p>
                                <label for="mbti">MBTI: </label>
                                <input class="input_border" type="text" id="mbti" name="mbti" value="${mbti}"readonly />
                            </p>
                            <p>
                                <label for="hobby">취미: </label>
                                <input class="input_border" type="text" id="hobby" name="hobby" value="${hobby}"readonly />
                            </p>
                            <p>
                                <label for="merit">장점: </label>
                                <input class="input_border" type="text" id="merit" name="merit" value="${merit}"readonly />
                            </p>
                            <p>
                                <label for="style">협업스타일: </label>
                                <input class="input_border" type="text" id="style" name="style" value="${style}"readonly />
                            </p>
                            <p>
                                <label for="blog">블로그주소: </label>
                                <input class="input_border" type="text" id="blog" name="blog" value="${blog}"readonly />
                            </p>
                            </div>`
                $('.content').append(temp_html)
            })
            
            
        });
        
        function content_modify() {
            let name = $('#name').val()
            let mbti = $('#mbti').val()
            let hobby = $('#hobby').val()
            let merit = $('#merit').val()
            let style = $('#style').val()
            let blog = $('#blog').val()
            $('.controls').empty()
            let temp_html = `<div class="controls">
                                <p>
                                <label for="name">이름: </label>
                                <input class="input_border" type="text" id="name" name="name" value="${name}" readonly/>
                            </p>
                            <p>
                                <label for="mbti">MBTI: </label>
                                <input type="text" id="mbti" name="mbti" value="${mbti}"/>
                            </p>
                            <p>
                                <label for="hobby">취미: </label>
                                <input type="text" id="hobby" name="hobby" value="${hobby}" />
                            </p>
                            <p>
                                <label for="merit">장점: </label>
                                <input type="text" id="merit" name="merit" value="${merit}" />
                            </p>
                            <p>
                                <label for="style">협업스타일: </label>
                                <input type="text" id="style" name="style" value="${style}" />
                            </p>
                            <p>
                                <label for="blog">블로그주소: </label>
                                <input type="text" id="blog" name="blog" value="${blog}"/>
                            </p>
                            </div>
                            <input type="button" onclick="complete_modify()" id="btn" class="btn btn-outline-dark" value="수정완료">
                            `
                            $('.controls').append(temp_html)

        }
        function complete_modify(){
            let name = $('#name').val()
            let mbti = $('#mbti').val()
            let hobby = $('#hobby').val()
            let merit = $('#merit').val()
            let style = $('#style').val()
            let blog = $('#blog').val()
            let formData = new FormData();
            formData.append("name", name);
            formData.append("mbti", mbti);
            formData.append("hobby", hobby);
            formData.append("merit", merit);
            formData.append("style", style);
            formData.append("blog", blog);
            fetch('/modify', { method: "POST", body: formData, }).then((response) => response.json()).then((data) => {
                
                
                window.location.reload();
        })
    }
        

    </script>
<style>
    .input_border {
    border: none;
    background-color: transparent;
}

.input_border:focus {
    outline: none;
}
</style>
</head>

<body>
    <div class="container">
        <section class="box">
            <aside class="box-sidebar">
                <ul class="team-list">
                    <label class="member">9조대원 LIST</label>
                    <p>
                        <li> <a href="/static/html/subpage.html?name=김성훈">
                                <img class="imoji" src="/static/img/KSH.png"> 김성훈</a>
                        </li>
                    </p>
                    <p>
                        <li><a href="/static/html/subpage.html?name=조인재">
                                <img class="imoji" src="/static/img/JIJ.png"> 조인재 </a>
                        </li>
                    </p>
                    <p>
                        <li><a href="/static/html/subpage.html?name=김진수">
                                <img class="imoji" src="/static/img/KJS.png"> 김진수 </a>
                        </li>
                    </p>
                    <p>
                        <li><a href="/static/html/subpage.html?name=윤수민">
                                <img class="imoji" src="/static/img/YSM.png"> 윤수민 </a>
                        </li>
                    </p>
                    <p>
                        <li><a href="/static/html/subpage.html?name=안홍민">
                                <img class="imoji" src="/static/img/AHM.png"> 안홍민 </a>
                        </li>
                    </p>
                </ul>
            </aside>

            <div class="box-contents">
                <div class="content">
                    <img class="main-imoji" src="">

                    <div class="information">
                        <div class="controls">
                            <p>
                                <label for="name">이름 </label>
                                <input type="text" id="id" name="name" value ="test"readonly />
                            </p>
                            <p>
                                <label for="mbti">MBTI </label>
                                <input type="text" id="id" name="mbti" readonly />
                            </p>
                            <p>
                                <label for="hobby">취미 </label>
                                <input type="text" id="id" name="hobby" readonly />
                            </p>
                            <p>
                                <label for="merit">장점 </label>
                                <input type="text" id="id" name="merit" readonly />
                            </p>
                            <p>
                                <label for="style">협업스타일 </label>
                                <input type="text" id="id" name="style" readonly />
                            </p>
                            <p>
                                <label for="blog">블로그주소</label>
                                <input type="text" id="id" name="blog" readonly />
                            </p>
                        </div>
                    </div>
                </div>

                <input type="button" onclick="content_modify()" id="btn" class="btn btn-outline-dark" value="내용 수정">
                <input type="button" value="정보넣기" onclick="location.href='input.html'">

                </form>
            </div>
        </section>
    </div>
</body>

</html>